(this.webpackJsonpsqueaker=this.webpackJsonpsqueaker||[]).push([[0],{121:function(e,t,a){e.exports=a.p+"static/media/squeak.8cc736ac.png"},125:function(e,t,a){e.exports=a(424)},130:function(e,t,a){},131:function(e,t,a){},133:function(e,t,a){},138:function(e,t,a){},139:function(e,t,a){},211:function(e,t,a){},212:function(e,t,a){},213:function(e,t,a){},424:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(120),o=a.n(c),l=(a(130),a(12)),s=a(13),i=a(15),u=a(14),m=a(7),h=(a(73),"elmoctarebnousqueaker"),d={saveAuthToken:function(e,t){window.localStorage.setItem(h,e),window.localStorage.setItem("userId",t)},getUserId:function(){return window.localStorage.getItem("userId")},getAuthToken:function(){return window.localStorage.getItem(h)},clearAuthToken:function(){window.localStorage.removeItem(h),window.localStorage.removeItem("userId")},hasAuthToken:function(){return!!d.getAuthToken()},makeBasicAuthToken:function(e,t){return window.btoa("".concat(e,":").concat(t))}},p=d,f=(a(131),a(121)),g=a.n(f),E=function(e){Object(i.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={hasToken:p.hasAuthToken()},e.handleScroll=function(){e.state.hasToken&&(window.scrollY>20?(document.querySelector(".nav").className="nav scroll",document.querySelector(".squeak").className="squeak black",document.querySelector(".login").className="login black",document.querySelector(".logo").className="logo black"):(document.querySelector(".nav").className="nav",document.querySelector(".squeak").className="squeak",document.querySelector(".login").className="login",document.querySelector(".logo").className="logo"))},e}return Object(s.a)(a,[{key:"componentDidMount",value:function(){window.addEventListener("scroll",this.handleScroll)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("scroll",this.handleScroll)}},{key:"render",value:function(){var e=r.a.createElement("a",{href:"/login"},r.a.createElement("span",{className:"login"},"Log In")),t=r.a.createElement(r.a.Fragment,null,r.a.createElement("a",{href:"/new-squeak"},r.a.createElement("span",{className:"squeak"},"Squeak")),r.a.createElement("a",{href:"/login",onClick:this.props.handleLogOut},r.a.createElement("span",{className:"login"},"Sign out")));return r.a.createElement(r.a.Fragment,null,r.a.createElement("header",null,r.a.createElement("nav",{className:"nav"},r.a.createElement("div",{className:"nav-menu flex"},r.a.createElement("a",{href:"/"},r.a.createElement("img",{src:g.a,alt:"logo"})," ",r.a.createElement("span",{className:"logo"},"Squeaker")),r.a.createElement("div",{className:"button flex"},this.props.login.login?t:e)))))}}]),a}(r.a.Component),b=a(8),v=a.n(b),k=a(25),y=a(38),w="http://localhost:8000/api",j={getArticles:function(){return fetch("".concat(w,"/articles"),{method:"GET",headers:{Authorization:"Bearer ".concat(p.getAuthToken()),"Content-Type":"application/json"}}).then((function(e){return e.ok?e.json():e.json().then((function(e){return Promise.reject(e)}))}))},getArticle:function(e){return fetch("".concat(w,"/articles/").concat(e),{method:"GET",headers:{Authorization:"Bearer ".concat(p.getAuthToken()),"Content-Type":"application/json"}}).then((function(e){return e.ok?e.json():e.json().then((function(e){return Promise.reject(e)}))}))},postArticle:function(e){return fetch("".concat(w,"/articles"),{method:"POST",headers:{Authorization:"Bearer ".concat(p.getAuthToken()),"Content-Type":"application/json"},body:JSON.stringify(e)})},deleteArticle:function(e){return fetch("".concat(w,"/articles/").concat(e),{method:"DELETE",headers:{Authorization:"Bearer ".concat(p.getAuthToken()),"Content-Type":"application/json"}})},postComment:function(e){return fetch("".concat(w,"/comments"),{method:"POST",headers:{Authorization:"Bearer ".concat(p.getAuthToken()),"Content-Type":"application/json"},body:JSON.stringify(e)})},deleteComment:function(e){return fetch("".concat(w,"/comments/").concat(e),{method:"DELETE",headers:{Authorization:"Bearer ".concat(p.getAuthToken()),"Content-Type":"application/json"},body:JSON.stringify({id:e})})},loginUser:function(e){return fetch("".concat(w,"/auth"),{method:"POST",headers:{Authorization:"Bearer ".concat(p.getAuthToken()),"Content-Type":"application/json"},body:JSON.stringify(e)}).then((function(e){return e.ok?e.json():e.json().then((function(e){return Promise.reject(e)}))}))},createUser:function(e){return fetch("".concat(w,"/users"),{method:"POST",headers:{Authorization:"Bearer ".concat(p.getAuthToken()),"Content-Type":"application/json"},body:JSON.stringify(e)}).then((function(e){return e.ok?e.json():e.json().then((function(e){return Promise.reject(e)}))}))}},S=(a(133),function(e){Object(i.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={articles:[]},e.fetchArticles=function(){j.getArticles().then((function(t){return e.setState({articles:t})}))},e.componentDidMount=Object(k.a)(v.a.mark((function t(){return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.fetchArticles();case 1:case"end":return t.stop()}}),t)}))),e}return Object(s.a)(a,[{key:"render",value:function(){var e=this.state.articles.reverse().map((function(e){return r.a.createElement(y.b,{key:e.id,to:"/squeakes/".concat(e.id)},r.a.createElement("div",{className:"article-div",key:e.id},r.a.createElement("div",{className:"head"},r.a.createElement("h1",{className:"author"},r.a.createElement("i",{className:"fas fa-user-circle"})," ",e.author_name),r.a.createElement("h1",{className:"title"},e.title)),r.a.createElement("div",{className:"info"},r.a.createElement("h4",{className:"comments"},r.a.createElement("i",{className:"far fa-comment"})," ",e.comments," comments"),r.a.createElement("h4",{className:"date"},r.a.createElement("i",{className:"far fa-calendar-alt"})," ",e.date_ft.substring(0,15)))))}));return r.a.createElement("div",{className:"flex-articles"},this.state.articles?e:r.a.createElement("h3",null,"..."))}}]),a}(r.a.Component)),O=a(29),N=(a(138),function(e){Object(i.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={user_name:"",full_name:"",nick_name:"",password:"",confirm_password:"",error_password:!1},e.handleChange=function(t){t.preventDefault(),e.setState(Object(O.a)({},t.target.name,t.target.value))},e.handleSubmit=function(){var t=Object(k.a)(v.a.mark((function t(a){var n,r,c,o,l;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a.preventDefault(),(n=e.state).password!==n.confirm_password&&e.setState({error_password:!0}),n.password!==n.confirm_password){t.next=13;break}return e.setState({error_password:!1}),r={user_name:n.user_name,full_name:n.full_name,password:n.password,nickname:n.nick_name},t.next=8,j.createUser(r);case 8:c=t.sent,o=c.user,l=c.authToken,p.saveAuthToken(l),e.props.handleLogin(o.id),e.props.history.push("/");case 13:case 14:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.handleDemo=function(){var t=Object(k.a)(v.a.mark((function t(a){var n,r,c,o;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a.preventDefault(),n={user_name:"leo",password:"Leo12345@"},t.next=4,j.loginUser(n);case 4:r=t.sent,c=r.user,o=r.authToken,p.saveAuthToken(o,c.id),e.props.handleLogin(),e.props.history.push("/");case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e}return Object(s.a)(a,[{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("form",{onSubmit:this.handleSubmit,className:"register-form"},r.a.createElement("h1",null,"Welcome to Squeaker!",r.a.createElement("br",null),"Create an account to start.",r.a.createElement("br",null),r.a.createElement("br",null)),r.a.createElement("h2",null,this.state.error_password?"PASSWORDS DO NOT MATCH!":""),r.a.createElement("input",{onChange:this.handleChange,name:"full_name",type:"text",placeholder:"Full name",required:!0}),r.a.createElement("br",null),r.a.createElement("input",{onChange:this.handleChange,name:"user_name",type:"text",placeholder:"Username",required:!0}),r.a.createElement("br",null),r.a.createElement("input",{onChange:this.handleChange,name:"password",type:"password",placeholder:"Password",required:!0}),r.a.createElement("br",null),r.a.createElement("input",{onChange:this.handleChange,name:"confirm_password",type:"password",placeholder:"Confirm Password",required:!0}),r.a.createElement("br",null),r.a.createElement("div",{className:"buttons"},r.a.createElement("button",null,"Create"),r.a.createElement("button",{type:"submit",onClick:this.handleDemo},"Demo"))))}}]),a}(r.a.Component)),C=(a(139),function(e){Object(i.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={user_name:"",password:"",loginError:!1},e.handleUpdate=function(t){t.preventDefault(),e.setState(Object(O.a)({},t.currentTarget.name,t.currentTarget.value))},e.handleSubmit=function(){var t=Object(k.a)(v.a.mark((function t(a){var n,r,c,o,l,s,i;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a.preventDefault(),n=e.state,r=n.user_name,c=n.password,o={user_name:r,password:c},t.next=5,j.loginUser(o);case 5:l=t.sent,s=l.user,i=l.authToken,p.saveAuthToken(i,s.id),e.props.handleLogin(),e.props.history.push("/");case 10:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e}return Object(s.a)(a,[{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("form",{onSubmit:this.handleSubmit,className:"login-form"},r.a.createElement("h1",null,"Sign in to Squeaker!"),r.a.createElement("h2",null,this.state.loginError?"USERNAME OR PASSWORD WRONG!":""),r.a.createElement("input",{onChange:this.handleUpdate,name:"user_name",type:"text",placeholder:"Username",required:!0}),r.a.createElement("br",null),r.a.createElement("input",{type:"password",onChange:this.handleUpdate,name:"password",placeholder:"Password",required:!0}),r.a.createElement("br",null),r.a.createElement("button",null,"Sign In")))}}]),a}(r.a.Component)),A=a(123),T=a.n(A),_=(a(211),function(e){Object(i.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).fetchData=function(){j.getArticle(n.state.id).then((function(e){return n.setState({article:e.article,comments:e.comments})})).catch((function(e){console.log(e)}))},n.handleDeleteArticle=function(){var e=Object(k.a)(v.a.mark((function e(t){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),console.log(t.currentTarget.id),e.next=4,j.deleteArticle(t.currentTarget.id);case 4:n.props.history.push("/");case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.updateNewComment=function(e){n.setState(Object(O.a)({},e.target.name,e.target.value))},n.handleDeleteComment=function(e){e.preventDefault();var t=e.currentTarget.id;j.deleteComment(t).then((function(){return n.fetchData()})).catch((function(e){return console.log(e)}))},n.handleSubmitNewComment=function(e){e.preventDefault();var t={text:n.state.newComment,article_id:n.state.id,date_ft:Date()};j.postComment(t).then((function(){return n.fetchData()})).catch((function(e){return console.log(e)})),n.setState({newComment:""})},n.state={user:"",id:e.match.params.id,article:{},comments:[],newComment:""},n}return Object(s.a)(a,[{key:"componentDidMount",value:function(){this.fetchData()}},{key:"render",value:function(){var e=this,t=this.state.article,a=t.author_id===t.user_id?r.a.createElement("button",{id:t.id,type:"submit",onClick:this.handleDeleteArticle},r.a.createElement("i",{className:"fas fa-trash"}),"  Delete Squeak"):r.a.createElement(r.a.Fragment,null),n=this.state.comments.map((function(t){return t.owner?r.a.createElement("div",{key:t.id,className:"comment"},r.a.createElement("h3",{className:"comment-author"},r.a.createElement("i",{className:"fas fa-user-circle"})," ",t.author),r.a.createElement("h3",{className:"comment-text"},t.comment),r.a.createElement("div",null,r.a.createElement("p",null,r.a.createElement("i",{className:"far fa-clock"})," ",t.date_ft.substring(3,10)," ",t.date_ft.substring(15,21)," CT"),r.a.createElement("button",{id:t.id,type:"submit",onClick:e.handleDeleteComment},r.a.createElement("i",{className:"fas fa-trash"})))):r.a.createElement("div",{key:t.id,className:"comment"},r.a.createElement("h3",{className:"comment-author"},r.a.createElement("i",{className:"fas fa-user-circle"})," ",t.author),r.a.createElement("h3",{className:"comment-text"},t.comment),r.a.createElement("p",null,r.a.createElement("i",{className:"far fa-clock"})," ",t.date_ft.substring(3,10)," ",t.date_ft.substring(15,21)," CT"))}));return r.a.createElement("div",{className:"article-page"},r.a.createElement("div",{key:this.state.id,className:"article"},r.a.createElement("h1",null,t.title),r.a.createElement("div",{className:"top"},r.a.createElement("h3",{className:"author"},r.a.createElement("i",{className:"fas fa-user-circle"})," ",t.author_name),r.a.createElement("h3",{className:"date"},r.a.createElement("i",{className:"far fa-calendar-alt"})," ",t.date_ft?t.date_ft.substring(3,21):"")),r.a.createElement("div",null,r.a.createElement(T.a,{source:t.content})),a),r.a.createElement("div",{className:"comments"},r.a.createElement("h1",null,"Discussion ",r.a.createElement("i",{className:"far fa-comment"})),r.a.createElement("form",{onSubmit:this.handleSubmitNewComment,className:"comments-form"},r.a.createElement("textarea",{value:this.state.newComment,onChange:this.updateNewComment,name:"newComment",placeholder:"Comment on this squeak",maxLength:"100"}),r.a.createElement("button",null,"Submit"))),r.a.createElement("ul",null,n))}}]),a}(r.a.Component)),q=(a(212),function(e){Object(i.a)(a,e);var t=Object(u.a)(a);function a(){return Object(l.a)(this,a),t.apply(this,arguments)}return Object(s.a)(a,[{key:"render",value:function(){return r.a.createElement("footer",{className:"footer"},r.a.createElement("p",null,"Squeaker copyright \xa9 2020. All rights reserved."))}}]),a}(r.a.Component)),D=(a(213),function(e){Object(i.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={title:"",content:"",author_id:e.props.user_id},e.handleUpdate=function(t){e.setState(Object(O.a)({},t.currentTarget.name,t.currentTarget.value))},e.handleSubmit=function(t){t.preventDefault();var a=e.state,n={title:a.title,content:a.content,author_id:a.author_id,date_ft:Date()};j.postArticle(n).then((function(e){return console.log("Article posted")})).catch((function(e){console.log(e)})),e.props.history.push("/")},e}return Object(s.a)(a,[{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("form",{onSubmit:this.handleSubmit,className:"form-squeak"},r.a.createElement("input",{onChange:this.handleUpdate,name:"title",type:"text",placeholder:"Squeak title",maxLength:"100",required:!0}),r.a.createElement("textarea",{onChange:this.handleUpdate,name:"content",placeholder:"Squeak using markdown",required:!0}),r.a.createElement("button",null,"Squeak")))}}]),a}(r.a.Component)),x=a(124),L={particles:{number:{value:500,density:{enable:!1}},size:{value:3,random:!0,anim:{speed:4,size_min:.3}},line_linked:{enable:!1},move:{random:!0,speed:1,direction:"top",out_mode:"out"}},interactivity:{events:{onhover:{enable:!0,mode:"bubble"},onclick:{enable:!0,mode:"repulse"}},modes:{bubble:{distance:250,duration:2,size:0,opacity:0},repulse:{distance:400,duration:4}}}},U=a.n(x).a,I=function(e){Object(i.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={login:p.hasAuthToken(),user_id:p.getUserId()},e.handleLogin=function(){e.setState({user_id:p.getUserId(),login:!0})},e.handleLogOut=function(){e.setState({user_id:null,login:!1}),p.clearAuthToken()},e}return Object(s.a)(a,[{key:"render",value:function(){var e=this;return r.a.createElement(r.a.Fragment,null,r.a.createElement(U,{className:"particles",params:L}),r.a.createElement(E,{handleLogOut:this.handleLogOut,login:this.state}),r.a.createElement(m.c,null,r.a.createElement(m.a,{exact:!0,path:"/",render:function(t){return e.state.login?r.a.createElement(S,Object.assign({token:e.state.token},t)):r.a.createElement(N,Object.assign({},t,{handleLogin:e.handleLogin}))}}),r.a.createElement(m.a,{exact:!0,path:"/register",render:function(t){return r.a.createElement(N,Object.assign({},t,{handleLogin:e.handleLogin}))}}),r.a.createElement(m.a,{exact:!0,path:"/login",render:function(t){return r.a.createElement(C,Object.assign({},t,{handleLogin:e.handleLogin}))}}),r.a.createElement(m.a,{exact:!0,path:"/squeakes/:id",render:function(t){return e.state.login?r.a.createElement(_,t):r.a.createElement(C,Object.assign({},t,{handleLogin:e.handleLogin}))}}),r.a.createElement(m.a,{exact:!0,path:"/new-squeak",render:function(t){return e.state.login?r.a.createElement(D,Object.assign({},t,{user_id:e.state.user_id})):r.a.createElement(C,Object.assign({},t,{handleLogin:e.handleLogin}))}})),r.a.createElement(q,null))}}]),a}(r.a.Component);o.a.render(r.a.createElement(y.a,null,r.a.createElement(I,null)),document.getElementById("root"))},73:function(e,t,a){}},[[125,1,2]]]);
//# sourceMappingURL=main.0c757bea.chunk.js.map